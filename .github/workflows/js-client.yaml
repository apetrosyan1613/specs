name: generate-client

on:
  push:
    branches:
      - test-branch

jobs:
  generate_js_client:
    runs-on: ubuntu-latest
    steps:
      - name: Commit and push changes
        uses: apetrosyan1613/github-action-push-to-another-repository@main
        with:
          target-repo-owner: 'apetrosyan1613'
          target-repo-name: 'qase-javascript'
          target-repo-path: 'qase-javascript'
          source-repo-path: 'specs'
          build-command: './Taskfile typescript'
          source-copy-dir: ./specs/examples/sdk/ts/*
          target-copy-dir: ./qase-javascript/qaseio/src
          commit-message: '[build] update client'
          git-username: 'Andranik Petrosyan'
          git-email: 'apetrosyan@qase.io'
          base-pr-branch: 'master'
          pr-title: 'Specs updated'
          pr-body: 'This PR is auto-generated'
          token: ${{ secrets.API_TOKEN_GITHUB }}
  generate_php_client:
    runs-on: ubuntu-latest
    steps:
      - name: Commit and push changes
        uses: apetrosyan1613/github-action-push-to-another-repository@main
        with:
          target-repo-owner: 'apetrosyan1613'
          target-repo-name: 'qase-php-client'
          target-repo-path: 'qase-php-client'
          source-repo-path: 'specs'
          build-command: './Taskfile php'
          source-copy-dir: ./specs/examples/sdk/php/*
          target-copy-dir: ./qase-php-client/
          commit-message: '[build] update client'
          git-username: 'Andranik Petrosyan'
          git-email: 'apetrosyan@qase.io'
          base-pr-branch: 'main'
          pr-title: 'Specs updated'
          pr-body: 'This PR is auto-generated'
          token: ${{ secrets.API_TOKEN_GITHUB }}
  generate_python_client:
    runs-on: ubuntu-latest
    steps:
      - name: Commit and push changes
        uses: apetrosyan1613/github-action-push-to-another-repository@main
        with:
          target-repo-owner: 'apetrosyan1613'
          target-repo-name: 'qase-python'
          target-repo-path: 'qase-php-client'
          source-repo-path: 'specs'
          build-command: './Taskfile python'
          source-copy-dir: ./specs/examples/sdk/python/*
          target-copy-dir: ./qase-python/qaseio/src
          commit-message: '[build] update client'
          git-username: 'Andranik Petrosyan'
          git-email: 'apetrosyan@qase.io'
          base-pr-branch: 'main'
          pr-title: 'Specs updated'
          pr-body: 'This PR is auto-generated'
          token: ${{ secrets.API_TOKEN_GITHUB }}
          